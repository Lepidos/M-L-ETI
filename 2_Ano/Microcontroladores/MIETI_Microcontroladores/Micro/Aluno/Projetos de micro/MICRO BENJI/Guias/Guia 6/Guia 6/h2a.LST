A51 MACRO ASSEMBLER  H2A                                                                  11/20/2014 19:24:17 PAGE     1


MACRO ASSEMBLER A51 V8.02b
OBJECT MODULE PLACED IN h2a.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE h2a.a51 NOMOD51 SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     NAME    H2A
                       2             
                       3             PUBLIC  INICIOH2A
                       4             
                       5             H2ACODE SEGMENT CODE                    ; Declara segmento
----                   6             RSEG    H2ACODE                                 ; Seleciona o segmento
                       7                     
                       8             ; Rotina que converte dígito hexadecimal armazenado
                       9             ; no endereço de memória apontado por R0 para ASCII
0000                  10     INICIOH2A:
                      11                     ; BA1: Bloco de atribuição 1
                      12                     ;MOV            A, @R0
0000 C3               13                     CLR C                           
0001 940A             14                     SUBB    A,#10           
                      15                     
                      16                     ; BD1: Bloco de decisão 1                                       
0003 4006             17                     JC BA3_NAO                      
                      18                     ; Carry é 0, logo é letra porque A>=0
                      19                     ; BA2_SIM: Bloco de atribuiçao 2                                        
0005 2441             20                     ADD A,#'A'                      
0007 F5F0             21                     MOV B,A                         
0009 8006             22                     JMP FIMH2A                      
                      23                     
                      24                     ; BA3_NAO: Bloco de atribuição 3                                        
000B                  25     BA3_NAO:
000B 240A             26                     ADD A,#10                       
000D 2430             27                     ADD A,#'0'                      
000F F5F0             28                     MOV B,A                         
0011                  29     FIMH2A:
0011 22               30                     RET                                     
                      31                     
                      32     END
                                     
                             ; Universidade do Minho
                             ; MIECOM
                             ; Microcontroladores
                             ; David Faria a48238
                             
                             ; Qual o objectivo de desenvolver este programa em dois módulos?
                             ; Diminui o tempo de execução. O programa fica mais leve em 
                             ; comparação se fosse feito em apenas um módulo.
                             
                             ; As directivas para ligação do programa utilizam-se quando o programa 
                             ; a desenvolver se encontra distribuído por vários módulos.
                             ; Como os módulos necessitam de partilhar informação torna-se necessário 
                             ; identificar a origem da informação (quando externa) 
                             ; ou qual a informação que vai ser partilhada.
                             
                             ; -> PUBLIC: Lista os símbolos que podem ser usados por outros módulos; 
                             ;                       exporta um símbolo, neste caso módulo H2A.
                             
                             ; -> EXTRN: Lista os símbolos referidos no módulo corrente e definidos 
                             ;                       noutro módulo; usa um símbolo, neste caso módulo MAIN.
                             
                             ; -> SEGMENT: Define um segmento.
                             
                             ; -> RSEG: Selecção de um segmento.
                             
A51 MACRO ASSEMBLER  H2A                                                                  11/20/2014 19:24:17 PAGE     2

                             ; -> NAME: Especifica o nome do módulo objecto gerado pelo programa.
                             
                             ; Qual o endereço na memória de código das etiquetas:
                             ; BA3_NAO: C:0x000F
                             ; FIM_H2A: C:0x0015
                             
                             ; Os ficheiros '.lst' contem os codigos maquina e assembly e os respectivos endereços no có
                             digo.
                             
                             ; O objectivo de incluir a linha: #include<89C51Rx2.inc> é: incluir uma biblioteca, neste c
                             aso, a do nosso microcontrolador.
                             
                             ; O ficheiro com extensão '.M51' contem os endereços das etiquetas, endereços de outras ins
                             truções.
A51 MACRO ASSEMBLER  H2A                                                                  11/20/2014 19:24:17 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

B. . . . . . . . .  D ADDR   00F0H   A   
BA3_NAO. . . . . .  C ADDR   000BH   R   SEG=H2ACODE
FIMH2A . . . . . .  C ADDR   0011H   R   SEG=H2ACODE
H2A. . . . . . . .  N NUMB   -----       
H2ACODE. . . . . .  C SEG    0012H       REL=UNIT
INICIOH2A. . . . .  C ADDR   0000H   R   SEG=H2ACODE


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
