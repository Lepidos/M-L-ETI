A51 MACRO ASSEMBLER  MAIN                                                                 02/03/2016 17:11:51 PAGE     1


MACRO ASSEMBLER A51 V8.02c
OBJECT MODULE PLACED IN .\Objects\main.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE main.a51 SET(SMALL) DEBUG PRINT(.\Listings\main.lst) OBJECT(.\Objects\m
                      ain.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     $nomod51 
                       2     ;#include <89c51ic2.inc>
                +1     3  +1 $save     
                +1   204  +1 $restore 
                     205     
                     206     
                     207     EXTRN CODE (INICIOWAIT)
                     208     EXTRN CODE (INICIODETECT)
                     209     EXTRN CODE (INICIODISPLAY)
                     210     EXTRN CODE (INICIOCHECK)
                     211     EXTRN CODE (INICIOREAD)
                     212     EXTRN CODE (INICIOPASS1)
                     213     EXTRN CODE (INICIOPASS)
                     214     EXTRN CODE (WAIT2)
                     215             
                     216             PUBLIC TRINCO
                     217             PUBLIC COD3
                     218             PUBLIC LER
                     219             
                     220             STACK_SEG       SEGMENT IDATA
----                 221             RSEG    STACK_SEG               
0000                 222             STACK:  DS      10h 
                     223                     
                     224             BITTRINCO SEGMENT DATA
----                 225             RSEG BITTRINCO
0000                 226             TRINCO: DS 1
                     227                     
                     228             BITREMOTE SEGMENT DATA
----                 229             RSEG BITREMOTE
0000                 230             REMOTE: DS 1
                     231             
                     232             LER1 SEGMENT DATA
----                 233             RSEG LER1       
0000                 234             LER: DS 4
                     235                     
                     236             COD1 SEGMENT CODE
----                 237             RSEG COD1       
0000 01020304        238             COD: DB 1,2,3,4
                     239             
                     240             COD2 SEGMENT DATA
----                 241             RSEG COD2
0000                 242             COD3:DS 4
                     243             
----                 244             CSEG AT 0H
0000 020000   F      245             JMP STARTUP
                     246             
                     247             INICIO1 SEGMENT CODE
----                 248             RSEG INICIO1
0000                 249     STARTUP:
0000 758100   F      250             MOV SP,#STACK-1
0003 750000   F      251             MOV TRINCO,#0
0006                 252     COPY:
0006 7B04            253             MOV R3,#4
0008 7800     F      254             MOV R0,#COD3
000A 900000   F      255             MOV DPTR,#COD
000D                 256     CPY:
000D E4              257             CLR A
A51 MACRO ASSEMBLER  MAIN                                                                 02/03/2016 17:11:51 PAGE     2

000E 93              258             MOVC A,@A+DPTR
000F F6              259             MOV @R0,A
0010 A3              260             INC DPTR
0011 08              261             INC R0
0012 DBF9            262             DJNZ R3,CPY
0014 7B03            263             MOV R3,#3
                     264             
                     265             
0016                 266     INICIO:
0016 D2AF            267             SETB EA
0018 7E00            268             MOV R6,#0
001A 750000   F      269             MOV REMOTE,#0
001D                 270     ESCOLHE:
001D E500     F      271             MOV A,REMOTE
001F B40004          272             CJNE A,#0,LOCAL1
0022 7810            273             MOV R0,#16
0024 8002            274             JMP DETECT
0026                 275     LOCAL1:
0026 7811            276             MOV R0,#17
0028                 277     DETECT:
0028 120000   F      278             LCALL INICIODISPLAY
002B 120000   F      279             LCALL INICIODETECT
                     280             USING 0
002E C000            281             PUSH AR0
0030 7801            282             MOV R0,#1
0032 120000   F      283             LCALL INICIOWAIT
0035 D000            284             POP AR0
0037 B8000E          285             CJNE R0,#0,VERIFICABOTOES
                     286             USING 0
003A C000            287             PUSH AR0
003C 7E01            288             MOV R6,#1
003E 120000   F      289             LCALL INICIOPASS1
0041 B8002A          290             CJNE R0,#0,TESTE1
0044 C000            291             PUSH AR0
0046 8057            292             JMP FIM2
0048                 293     VERIFICABOTOES:
0048 B8020F          294             CJNE R0,#2,ENTER 
004B E500     F      295             MOV A,REMOTE
004D B40005          296             CJNE A,#0,MUDAPARA0
0050 750001   F      297             MOV REMOTE,#1
0053 80C8            298             JMP ESCOLHE
0055                 299     MUDAPARA0:
0055 750000   F      300             MOV REMOTE,#0
0058 80C3            301             JMP ESCOLHE
005A                 302     ENTER:
005A E500     F      303             MOV A,REMOTE
005C B40105          304             CJNE A,#1,LOCAL2
005F 120000   F      305             LCALL INICIOPASS1
0062 800A            306             JMP TESTE1
0064                 307     LOCAL2:
0064 7800     F      308             MOV R0,#LER
0066                 309     MAIN:
                     310             
0066 120000   F      311             LCALL INICIOPASS  
                     312             
0069 B80002          313             CJNE R0,#0,TESTE1
006C 8031            314             JMP FIM2
                     315             
                     316     
006E                 317     TESTE1:
006E 7800     F      318             MOV R0,#LER
0070 7900     F      319             MOV R1,#COD3
0072 120000   F      320             LCALL INICIOCHECK
0075 E8              321             MOV A,R0
0076 7014            322             JNZ TRUE
0078                 323     FALSE:
A51 MACRO ASSEMBLER  MAIN                                                                 02/03/2016 17:11:51 PAGE     3

0078 780B            324             MOV R0,#11
007A DB17            325             DJNZ R3,FIM
007C 120000   F      326             LCALL INICIODISPLAY
007F 7B03            327             MOV R3,#3
                     328             USING 0
0081 C000            329             PUSH AR0
0083 780F            330             MOV R0,#15
0085 120000   F      331             LCALL INICIOWAIT
0088 D000            332             POP AR0
008A 8013            333             JMP FIM2        
                     334             
008C                 335     TRUE:
008C 120000   F      336             CALL WAIT2
008F 780C            337             MOV R0,#12  
0091 7B03            338             MOV R3,#3       
                     339     
0093                 340     FIM:    
0093 120000   F      341             CALL INICIODISPLAY
                     342             USING 0
0096 C000            343             PUSH AR0
0098 7802            344             MOV R0,#2
009A 120000   F      345             CALL INICIOWAIT
009D D000            346             POP AR0
                     347             
009F                 348     FIM2:
009F 780A            349             MOV R0,#10
00A1 120000   F      350             CALL INICIODISPLAY
00A4 020000   F      351             JMP INICIO
                     352     END
                                     
A51 MACRO ASSEMBLER  MAIN                                                                 02/03/2016 17:11:51 PAGE     4

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

AC . . . . . . . .  B ADDR   00D0H.6 A   
ACC. . . . . . . .  D ADDR   00E0H   A   
AR0. . . . . . . .  D ADDR   0000H   A   
AUXR . . . . . . .  D ADDR   008EH   A   
AUXR1. . . . . . .  D ADDR   00A2H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
BDRCON . . . . . .  D ADDR   009BH   A   
BITREMOTE. . . . .  D SEG    0001H       REL=UNIT
BITTRINCO. . . . .  D SEG    0001H       REL=UNIT
BRL. . . . . . . .  D ADDR   009AH   A   
CCAP0H . . . . . .  D ADDR   00FAH   A   
CCAP0L . . . . . .  D ADDR   00EAH   A   
CCAP1H . . . . . .  D ADDR   00FBH   A   
CCAP1L . . . . . .  D ADDR   00EBH   A   
CCAP2H . . . . . .  D ADDR   00FCH   A   
CCAP2L . . . . . .  D ADDR   00ECH   A   
CCAP3H . . . . . .  D ADDR   00FDH   A   
CCAP3L . . . . . .  D ADDR   00EDH   A   
CCAP4H . . . . . .  D ADDR   00FEH   A   
CCAP4L . . . . . .  D ADDR   00EEH   A   
CCAPM0 . . . . . .  D ADDR   00DAH   A   
CCAPM1 . . . . . .  D ADDR   00DBH   A   
CCAPM2 . . . . . .  D ADDR   00DCH   A   
CCAPM3 . . . . . .  D ADDR   00DDH   A   
CCAPM4 . . . . . .  D ADDR   00DEH   A   
CCF0 . . . . . . .  D ADDR   00D8H   A   
CCF1 . . . . . . .  D ADDR   00D9H   A   
CCF2 . . . . . . .  D ADDR   00DAH   A   
CCF3 . . . . . . .  D ADDR   00DBH   A   
CCF4 . . . . . . .  D ADDR   00DCH   A   
CCON . . . . . . .  D ADDR   00D8H   A   
CF . . . . . . . .  D ADDR   00DFH   A   
CH . . . . . . . .  D ADDR   00F9H   A   
CKCON0 . . . . . .  D ADDR   008FH   A   
CKCON1 . . . . . .  D ADDR   00AFH   A   
CKRL . . . . . . .  D ADDR   0096H   A   
CKSEL. . . . . . .  D ADDR   0085H   A   
CL . . . . . . . .  D ADDR   00E9H   A   
CMOD . . . . . . .  D ADDR   00D9H   A   
COD. . . . . . . .  C ADDR   0000H   R   SEG=COD1
COD1 . . . . . . .  C SEG    0004H       REL=UNIT
COD2 . . . . . . .  D SEG    0004H       REL=UNIT
COD3 . . . . . . .  D ADDR   0000H   R   SEG=COD2
COPY . . . . . . .  C ADDR   0006H   R   SEG=INICIO1
CPY. . . . . . . .  C ADDR   000DH   R   SEG=INICIO1
CP_RL2 . . . . . .  B ADDR   00C8H.0 A   
CR . . . . . . . .  D ADDR   00DEH   A   
CY . . . . . . . .  B ADDR   00D0H.7 A   
C_T2 . . . . . . .  B ADDR   00C8H.1 A   
DETECT . . . . . .  C ADDR   0028H   R   SEG=INICIO1
DPH. . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
EC . . . . . . . .  B ADDR   00A8H.6 A   
ENTER. . . . . . .  C ADDR   005AH   R   SEG=INICIO1
ES . . . . . . . .  B ADDR   00A8H.4 A   
ESCOLHE. . . . . .  C ADDR   001DH   R   SEG=INICIO1
ET0. . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . .  B ADDR   00A8H.3 A   
ET2. . . . . . . .  B ADDR   00A8H.5 A   
A51 MACRO ASSEMBLER  MAIN                                                                 02/03/2016 17:11:51 PAGE     5

EX0. . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . .  B ADDR   00A8H.2 A   
EXEN2. . . . . . .  B ADDR   00C8H.3 A   
EXF2 . . . . . . .  B ADDR   00C8H.6 A   
F0 . . . . . . . .  B ADDR   00D0H.5 A   
FALSE. . . . . . .  C ADDR   0078H   R   SEG=INICIO1
FCON . . . . . . .  D ADDR   00D1H   A   
FIM. . . . . . . .  C ADDR   0093H   R   SEG=INICIO1
FIM2 . . . . . . .  C ADDR   009FH   R   SEG=INICIO1
IE0. . . . . . . .  B ADDR   0088H.1 A   
IE1. . . . . . . .  B ADDR   0088H.3 A   
IEN0 . . . . . . .  D ADDR   00A8H   A   
IEN1 . . . . . . .  D ADDR   00B1H   A   
INICIO . . . . . .  C ADDR   0016H   R   SEG=INICIO1
INICIO1. . . . . .  C SEG    00A7H       REL=UNIT
INICIOCHECK. . . .  C ADDR   -----       EXT
INICIODETECT . . .  C ADDR   -----       EXT
INICIODISPLAY. . .  C ADDR   -----       EXT
INICIOPASS . . . .  C ADDR   -----       EXT
INICIOPASS1. . . .  C ADDR   -----       EXT
INICIOREAD . . . .  C ADDR   -----       EXT
INICIOWAIT . . . .  C ADDR   -----       EXT
INT0 . . . . . . .  B ADDR   00B0H.2 A   
INT1 . . . . . . .  B ADDR   00B0H.3 A   
IPH0 . . . . . . .  D ADDR   00B7H   A   
IPH1 . . . . . . .  D ADDR   00B3H   A   
IPL0 . . . . . . .  D ADDR   00B8H   A   
IPL1 . . . . . . .  D ADDR   00B2H   A   
IT0. . . . . . . .  B ADDR   0088H.0 A   
IT1. . . . . . . .  B ADDR   0088H.2 A   
KBE. . . . . . . .  D ADDR   009DH   A   
KBF. . . . . . . .  D ADDR   009EH   A   
KBLS . . . . . . .  D ADDR   009CH   A   
LER. . . . . . . .  D ADDR   0000H   R   SEG=LER1
LER1 . . . . . . .  D SEG    0004H       REL=UNIT
LOCAL1 . . . . . .  C ADDR   0026H   R   SEG=INICIO1
LOCAL2 . . . . . .  C ADDR   0064H   R   SEG=INICIO1
MAIN . . . . . . .  C ADDR   0066H   R   SEG=INICIO1
MUDAPARA0. . . . .  C ADDR   0055H   R   SEG=INICIO1
OSCCON . . . . . .  D ADDR   0086H   A   
OV . . . . . . . .  B ADDR   00D0H.2 A   
P. . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P3 . . . . . . . .  D ADDR   00B0H   A   
PCON . . . . . . .  D ADDR   0087H   A   
PI2. . . . . . . .  D ADDR   00C0H   A   
PI2_1. . . . . . .  B ADDR   00C0H.1 A   
PI2_O. . . . . . .  B ADDR   00C0H.0 A   
PPCL . . . . . . .  B ADDR   00B8H.6 A   
PSL. . . . . . . .  B ADDR   00B8H.4 A   
PSW. . . . . . . .  D ADDR   00D0H   A   
PT0L . . . . . . .  B ADDR   00B8H.1 A   
PT1L . . . . . . .  B ADDR   00B8H.3 A   
PT2L . . . . . . .  B ADDR   00B8H.5 A   
PX0L . . . . . . .  B ADDR   00B8H.0 A   
PX1L . . . . . . .  B ADDR   00B8H.2 A   
RB8. . . . . . . .  B ADDR   0098H.2 A   
RCAP2H . . . . . .  D ADDR   00CBH   A   
RCAP2L . . . . . .  D ADDR   00CAH   A   
RCLK . . . . . . .  B ADDR   00C8H.5 A   
RD . . . . . . . .  B ADDR   00B0H.7 A   
REMOTE . . . . . .  D ADDR   0000H   R   SEG=BITREMOTE
REN. . . . . . . .  B ADDR   0098H.4 A   
RI . . . . . . . .  B ADDR   0098H.0 A   
A51 MACRO ASSEMBLER  MAIN                                                                 02/03/2016 17:11:51 PAGE     6

RS0. . . . . . . .  B ADDR   00D0H.3 A   
RS1. . . . . . . .  B ADDR   00D0H.4 A   
RXD. . . . . . . .  B ADDR   00B0H.0 A   
SADDR. . . . . . .  D ADDR   00A9H   A   
SADEN. . . . . . .  D ADDR   00B9H   A   
SBUF . . . . . . .  D ADDR   0099H   A   
SCON . . . . . . .  D ADDR   0098H   A   
SM0. . . . . . . .  B ADDR   0098H.7 A   
SM1. . . . . . . .  B ADDR   0098H.6 A   
SM2. . . . . . . .  B ADDR   0098H.5 A   
SP . . . . . . . .  D ADDR   0081H   A   
SPCON. . . . . . .  D ADDR   00C3H   A   
SPDAT. . . . . . .  D ADDR   00C5H   A   
SPSTA. . . . . . .  D ADDR   00C4H   A   
SSADR. . . . . . .  D ADDR   0096H   A   
SSCON. . . . . . .  D ADDR   0093H   A   
SSCS . . . . . . .  D ADDR   0094H   A   
SSDAT. . . . . . .  D ADDR   0095H   A   
STACK. . . . . . .  I ADDR   0000H   R   SEG=STACK_SEG
STACK_SEG. . . . .  I SEG    0010H       REL=UNIT
STARTUP. . . . . .  C ADDR   0000H   R   SEG=INICIO1
T0 . . . . . . . .  B ADDR   00B0H.4 A   
T1 . . . . . . . .  B ADDR   00B0H.5 A   
T2CON. . . . . . .  D ADDR   00C8H   A   
T2MOD. . . . . . .  D ADDR   00C9H   A   
TB8. . . . . . . .  B ADDR   0098H.3 A   
TCLK . . . . . . .  B ADDR   00C8H.4 A   
TCON . . . . . . .  D ADDR   0088H   A   
TESTE1 . . . . . .  C ADDR   006EH   R   SEG=INICIO1
TF0. . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . .  B ADDR   0088H.7 A   
TF2. . . . . . . .  B ADDR   00C8H.7 A   
TH0. . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . .  D ADDR   008DH   A   
TH2. . . . . . . .  D ADDR   00CDH   A   
TI . . . . . . . .  B ADDR   0098H.1 A   
TL0. . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . .  D ADDR   008BH   A   
TL2. . . . . . . .  D ADDR   00CCH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . .  B ADDR   0088H.6 A   
TR2. . . . . . . .  B ADDR   00C8H.2 A   
TRINCO . . . . . .  D ADDR   0000H   R   SEG=BITTRINCO
TRUE . . . . . . .  C ADDR   008CH   R   SEG=INICIO1
TXD. . . . . . . .  B ADDR   00B0H.1 A   
VERIFICABOTOES . .  C ADDR   0048H   R   SEG=INICIO1
WAIT2. . . . . . .  C ADDR   -----       EXT
WDTPRG . . . . . .  D ADDR   00A7H   A   
WDTRST . . . . . .  D ADDR   00A6H   A   
WR . . . . . . . .  B ADDR   00B0H.6 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
