\documentclass[12pt,a4paper,table]{report}
\usepackage[top=2cm,bottom=2cm,left=3cm,right=3cm]{geometry}
\usepackage[portuguese]{babel}
\hyphenation{mate-mática recu-perar}
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{titlesec}
\usepackage{etoolbox}
\usepackage{epigraph}
\usepackage{subcaption}

\makeatletter
\patchcmd{\ttlh@hang}{\parindent\z@}{\parindent\z@\leavevmode}{}{}
\patchcmd{\ttlh@hang}{\noindent}{}{}{}
\makeatother
\usepackage{fixltx2e}
\usepackage{siunitx}
\usepackage{listings}
\usepackage{subfiles}
\usepackage[titletoc,title]{appendix}
\usepackage[hidelinks]{hyperref} %Hiperligações
\usepackage{indentfirst}
\usepackage{float}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage[makeroom]{cancel}
\usepackage{amssymb}
\usepackage{gensymb}
\usepackage{url}
\usepackage{pgfplots}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
%\usepackage[]{algorithm2e}
\pgfplotsset{every axis legend/.append style={
at={(1,0)},
anchor=south east}}
\usepackage{color}
\usepackage[singlelinecheck=false,hypcap]{caption}
\usepackage{multirow}
\usepackage[normalem]{ulem}
\usepackage{textcomp}

\lstset{
  columns=flexible,
  numbers=left,
  numbersep=5pt,
  numberstyle=\scriptsize\color{black},
  backgroundcolor=\color{white},   			% choose the background color
  basicstyle=\footnotesize\ttfamily,        % size of fonts used for the code
  breaklines=true,                 			% automatic line breaking only at whitespace
  captionpos=t,                    			% sets the caption-position to bottom
  commentstyle=\color{cinza},     			% comment style
  escapeinside={\%*}{*)},          			% if you want to add LaTeX within your code
  keywordstyle=\color{blue},       			% keyword style
  stringstyle=\color{mygreen},     			% string literal style
  showspaces=false,
  upquote=true,
  showstringspaces=false,
  literate=%
        {é}{{\'{e}}}1
        {è}{{\`{e}}}1
        {ê}{{\^{e}}}1
        {ë}{{\¨{e}}}1
        {É}{{\'{E}}}1
        {Ê}{{\^{E}}}1
        {û}{{\^{u}}}1
        {ù}{{\`{u}}}1
        {ú}{{\'{u}}}1
        {â}{{\^{a}}}1
        {à}{{\`{a}}}1
        {á}{{\'{a}}}1
        {ã}{{\~{a}}}1
        {Á}{{\'{A}}}1
        {Â}{{\^{A}}}1
        {Ã}{{\~{A}}}1
        {ç}{{\c{c}}}1
        {Ç}{{\c{C}}}1
        {õ}{{\~{o}}}1
        {ó}{{\'{o}}}1
        {ô}{{\^{o}}}1
        {Õ}{{\~{O}}}1
        {Ó}{{\'{O}}}1
        {Ô}{{\^{O}}}1
        {î}{{\^{i}}}1
        {Î}{{\^{I}}}1
        {í}{{\'{i}}}1
        {Í}{{\~{Í}}}1
}

\lstset{emph={%  
    @Override, function, placeholder, String, Exception, catch, then, var%
    },emphstyle={\color{blue}}%
}%

\definecolor{cinza}{RGB}{78,75,73}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{light-gray}{gray}{0.95}

\usepackage{caption}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{cinza}{\parbox{\textwidth}{#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white}




\usepackage{caption}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{cinza}{\parbox{\textwidth}{#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white}


\usepackage[normalem]{ulem}%usar sublinhado nas chaves estrangeiras

\usepackage{cite}


\graphicspath{{imagens/}{../imagens/}} % caminho das imagens
\renewcommand{\listfigurename}{Lista de Figuras} % Altera o título da listagem de figuras
\renewcommand{\listtablename}{Lista de Tabelas} % Altera o título da listagem de figuras
\renewcommand{\lstlistlistingname}{Lista de exemplos}% Alterar título das listagens

\addto\captionsportuguese{\renewcommand{\contentsname}{Índice}}

\definecolor{light-gray}{gray}{0.95}
\newcommand{\code}[1]{\colorbox{light-gray}{\texttt{#1}}}
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

\renewcommand{\figurename}{Figura} % Altera o formato das figuras
\renewcommand{\tablename}{Tabela} % Altera o formato das figuras
\renewcommand{\chaptername}{Capítulo}
\renewcommand{\appendixname}{Apêndice}
\renewcommand{\lstlistingname}{Exemplo}% Mudar formato das Listagens


\setlength\parindent{1cm}  %escolher aqui a formatação do TAB, dependendo do tamanho mudar o valor do %espaço do chapter abaixo
%\setlength{\parindent}{4em}
\setlength{\parskip}{1em}
\renewcommand{\baselinestretch}{1.5}

\usepackage{etoolbox}


\titlespacing*{\chapter}{0pt}{0pt}{10pt}

\titleformat{\chapter}{\normalfont\huge\bfseries}{\thechapter.}{5pt}{\huge}

\usepackage{setspace}

\usepackage[section]{placeins}

\renewcommand\thetable{\arabic{table}}
\setcounter{table}{0}

\renewcommand\thefigure{\arabic{figure}}
\setcounter{figure}{0}

\usepackage{array}
\usepackage{pdflscape}

\usepackage{chngcntr}
\counterwithout{table}{chapter}
\counterwithout{figure}{chapter}

\newcommand*{\fullref}[1]{\hyperref[{#1}]{\autoref*{#1} \nameref*{#1}}}

%-----------------------------------------------------------------------------------------
\begin{document}
\subfile{capitulos/capa} 

\newgeometry{top=2cm,bottom=2cm,left=3cm,right=3cm}

\counterwithout{lstlisting}{chapter}

{\setstretch{0.5}
\tableofcontents
\addtocontents{toc}{~\hfill\textbf{Página}\par}
}

{\setstretch{0.5}
\let\origaddvspace\addvspace
 \renewcommand{\addvspace}[1]{}
 \addtocontents{lof}{~\hfill\textbf{Página}\par}
 \listoffigures
 }
 
\chapter{Introdução}
\subfile{capitulos/introducao}

\restoregeometry
\end{document}
