interface eth0
  ip address 192.168.1.21/30
  ip ospf authentication message-digest
  ip ospf message-digest-key 1 md5 rc2fln
!
interface eth1
  ip address 192.168.1.25/30
  ip ospf authentication message-digest
  ip ospf message-digest-key 1 md5 rc2fln
!
interface eth2
  ip address 192.168.1.18/30
!
interface eth3
  ip address 10.1.0.1/30
  ip ospf authentication message-digest
  ip ospf message-digest-key 1 md5 rc2fln
!
router ospf
 redistribute bgp
 network 10.1.0.0/30 area 0.0.0.0
 network 192.168.1.20/30 area 0.0.0.0
 network 192.168.1.24/30 area 0.0.0.0
 area 0.0.0.0 authentication message-digest
!
router bgp 65100
 bgp router-id 10.1.1.1
 network 10.1.0.0/16
 neighbor 192.168.1.17 remote-as 65300
 neighbor 192.168.1.17 route-map directonly out
 neighbor 192.168.1.17 route-map rm3 in
 neighbor 192.168.1.22 remote-as 65100
 neighbor 192.168.1.22 next-hop-self
 neighbor 192.168.1.22 route-map rm4 in
 neighbor 192.168.1.26 remote-as 65100
 neighbor 192.168.1.26 next-hop-self
!
!---s√≥ aceita 10.1.0.0
ip prefix-list pf1 seq 5 permit 10.1.0.0/16
!
route-map directonly permit 10
 match ip address prefix-list pf1
!
ip prefix-list pf1 seq 5 permit 10.1.0.0/16
ip prefix-list pf3 seq 5 permit 10.3.0.0/16
ip prefix-list pf4 seq 5 permit 10.4.0.0/16
ip prefix-list pftudo3 seq 5 permit 10.0.0.0/16
ip prefix-list pftudo3 seq 10 permit 10.1.0.0/16
ip prefix-list pftudo3 seq 15 permit 10.2.0.0/16
ip prefix-list pftudo3 seq 20 permit 10.4.0.0/16
ip prefix-list pftudo4 seq 5 permit 10.0.0.0/16
ip prefix-list pftudo4 seq 10 permit 10.1.0.0/16
ip prefix-list pftudo4 seq 15 permit 10.2.0.0/16
ip prefix-list pftudo4 seq 20 permit 10.3.0.0/16
!
route-map directonly permit 5
 match ip address prefix-list pf1
!
route-map rm4 permit 10
 match ip address prefix-list pftudo4
!
!---para 400 vai por R4
route-map rm4 permit 15
 match ip address prefix-list pf4
 set local-preference 500
!
route-map rm3 permit 20
 match ip address prefix-list pftudo3
!
!---para 300 vai por R3
route-map rm3 permit 25
 match ip address prefix-list pf3
 set local-preference 500
!